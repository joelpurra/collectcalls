# CollectCalls javascript library.
Collects `function () { }` blocks that should be called in the future. The script `collectcalls.joelpurra.js` does not need to load until the future is nigh.

While loading a script, it might have dependencies that prevents it from executing right away. CollectCalls can collect functions and call them at a later time, for example when jQuery and all dependencies have loaded. Mostly useful for web pages, where code (page parts, included files, scoped functions) may scatter `<script>` tags.

## Basic example with jQuery
jQuery is loaded at the bottom of the page for efficiency, but `<script>` tags are generated by page parts. Use `CollectCalls` to let the `<script>` tags enqueue functionality until jQuery has loaded.

```html
<!-- Code that is written to the HTML now, but needs to be executed later -->
<!-- This can be anywhere on the page, and multiple times -->
<script>
	// Set up, or reuse, a queue built as an array object
	var runWithJQuery = runWithJQuery || [];

	runWithJQuery.push(function() {
		// Do some heavy lifting with jQuery
		var scriptCount = $("script").length;

		// Then show alert box
		alert("The queue is invoked. Found " + scriptCount + " script tags on the page.");
	});
</script>

<!-- Load jQuery -->
<script src="http://code.jquery.com/jquery-latest.js"></script>

<!-- Load collectcalls.joelpurra.js at any point before calling JoelPurra.CollectCalls -->
<script src="https://raw.github.com/joelpurra/collectcalls/master/src/collectcalls.joelpurra.js"></script>
 
<script>
	// This code won't be executed until jQuery has been loaded.
	$(function ()
	{
		// Wrap the queue with CollectCalls
		runWithJQuery = new JoelPurra.CollectCalls(runWithJQuery);
		
		// Invoke the entire queue in the order the functions were added
		runWithJQuery.join();
	});
</script>
```

## Usage
CollectCalls was inspired by the command queue in [Google Analytic's Asynchronous Syntax](http://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html).

```javascript
// Set up, or reuse, a queue built as an array object.
// This can be done as many times you like.
var collectCallQueue = collectCallQueue || [];

// Push any function.
// This can be done as many times you like.
collectCallQueue.push(fnc);

// When the time is right, wrap the queue with CollectCalls.
// This can only be done once per queue.
collectCallQueue = new JoelPurra.CollectCalls(collectCallQueue);

// Then invoke the entire queue in the order the functions were added.
// This is only necessary to do once per queue.
collectCallQueue.join();
```

## Dependencies
CollectCalls does not have any dependencies.

## License
Copyright (c) 2010, 2011, 2012, Joel Purra <http://joelpurra.se/>
All rights reserved.

When using CollectCalls, comply to at least one of the three available licenses: BSD, MIT, GPL.
Please see the LICENSE file for details.
